CXX = icpc
CXXCUDA = nvcc
PATHTOBOOST = /home/gkhoury/boost_1_52_0/
CFLAGS = -O2 -I $(PATHTOBOOST) 
OMPFLAGS = -openmp 
Default: MD
OMP = cellList.o main.o nvt.o integrator.o system.o utils.o

%.o : %.c
	$(CXX) $(CFLAGS) -c $<

#potential.o : potential.cu
#	$(CXXCUDA) -DNVCC -gencode arch=compute_20,code=sm_20 $(CFLAGS) -c potential.cu

cellList.o : cellList.cpp
	$(CXX) -DNVCC $(OMPFLAGS) $(CFLAGS) -c cellList.cpp
	
main.o : main.cpp
	$(CXX) -DNVCC $(OMPFLAGS) $(CFLAGS) -c main.cpp
	
nvt.o : nvt.cpp
	$(CXX) -DNVCC $(OMPFLAGS) $(CFLAGS) -c nvt.cpp
	
integrator.o : integrator.cu
	$(CXXCUDA) -DNVCC -gencode arch=compute_20,code=sm_20 $(CFLAGS) -c integrator.cu
	
system.o : system.cpp
	$(CXX) -DNVCC $(CFLAGS) $(OMPFLAGS) -c system.cpp

utils.o : utils.cpp
	$(CXX) -DNVCC $(OMPFLAGS) $(CFLAGS) -c utils.cpp

MD: $(OMP)
	$(CXX) -lcudart $(OMPFLAGS) -o md $(CFLAGS) $(OMP) 

clean:
	$(RM) md
	$(RM) *.o
